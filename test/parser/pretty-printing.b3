// RUN: %b3 parse --print "%s" > "%t"
// RUN: %diff "%s.expect" "%t"

function Q(x: int): bool

procedure P(b: bool) {
  var a := 2 * 3 + 4 * 5 * (6 + 7) * 8
  a := 2 + 3 - 4 + 5 - (6 + 7) - (8 - 9) - 10
  a := 2 * 3 div 4 * 5 mod (6 * 7) div (8 mod 9) mod 10

  assert (b && b && b) || (b && b)
  assert (b || b || b) && (b || b)

  assert (a < a) == (a <= a)
  assert b == (a == a) && (a != a) != b

  var x := 3 + (if b 10 else 20) + 4
  var y := 3 + (val z := if b 10 else 20 z + z) + 4
  assert b && (forall x: int Q(x)) && b
  x := 3 * (if b 10 else 1 + 20) + 4
  x := 3 + (if b 10 else 1 + 20) * 4

  var k := a + -a - ----a + -(a + a) + 2
  var l := b && !b && !!!!b && !(b || b) && b
}

procedure R(out a: int, out b: bool) {
  a := (0 + 1) + 2
  a := (3 + 4) - 5
  a := (6 - 7) + 8
  a := (9 - 10) - 11

  a := 0 + (1 + 2)
  a := 3 + (4 - 5)
  a := 6 - (7 + 8) // parens needed
  a := 9 - (10 - 11) // parens needed

  a := (3 + 4 * 5) div 6 // parens needed

  b := (((b && b) || b) && b) || b // all parens needed
  b := b && (b || (b && (b || b))) // all parens needed
}

procedure ImpliesAndFriends(a: bool, b: bool, c: bool, d: bool)
{
  assert a ==> b ==> c ==> d
  assert a <== b <== c <== d
  assert a <==> b <==> c <==> d

  assert a ==> (b ==> c) ==> d // parens needed
  assert a <== (b <== c) <== d // parens needed
  assert a <==> (b <==> c) <==> d
}
